<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Referrals - EverNet</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #8B5CF6;
            --secondary: #10B981;
            --dark: #1F2937;
            --light: #F9FAFB;
            --border: #E5E7EB;
            --text: #111827;
            --text-light: #6B7280;
            --card-bg: #FFFFFF;
            --radius: 10px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: #f5f5f5;
            color: var(--text);
            font-size: 14px;
            line-height: 1.4;
            padding: 10px;
        }

        /* Header */
        .header {
            background: white;
            border-radius: var(--radius);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .brand {
            font-weight: 700;
            color: var(--primary);
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-email {
            font-size: 12px;
            color: var(--text-light);
            background: var(--light);
            padding: 4px 10px;
            border-radius: 12px;
            max-width: 120px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        /* Stats */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .stat-card {
            background: white;
            border-radius: var(--radius);
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            text-align: center;
            border-left: 3px solid var(--primary);
        }

        .stat-card:nth-child(2) { border-left-color: var(--secondary); }
        .stat-card:nth-child(3) { border-left-color: #F59E0B; }
        .stat-card:nth-child(4) { border-left-color: #3B82F6; }

        .stat-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            background: white;
            border-radius: var(--radius);
            margin-bottom: 15px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            flex: 1;
            padding: 12px 8px;
            border: none;
            background: none;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-light);
            cursor: pointer;
            text-align: center;
            white-space: nowrap;
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            font-weight: 600;
        }

        /* Content */
        .content {
            background: white;
            border-radius: var(--radius);
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .content-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: -15px;
            padding: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 500px;
        }

        th {
            background: var(--light);
            padding: 10px;
            text-align: left;
            font-size: 11px;
            color: var(--text-light);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            border-bottom: 2px solid var(--border);
            white-space: nowrap;
        }

        td {
            padding: 10px;
            border-bottom: 1px solid var(--border);
            font-size: 12px;
            white-space: nowrap;
        }

        tr:last-child td {
            border-bottom: none;
        }

        /* Badges */
        .badge {
            padding: 3px 8px;
            border-radius: 10px;
            font-size: 10px;
            font-weight: 600;
            display: inline-block;
        }

        .badge-success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--secondary);
        }

        /* Code Box */
        .code-box {
            background: linear-gradient(135deg, var(--primary), #7C3AED);
            border-radius: var(--radius);
            padding: 15px;
            text-align: center;
            color: white;
            margin: 15px 0;
        }

        .code {
            font-family: monospace;
            font-size: 22px;
            font-weight: 700;
            letter-spacing: 2px;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border-radius: 6px;
            border: 1px dashed rgba(255,255,255,0.3);
            word-break: break-all;
        }

        /* Buttons */
        .btn {
            padding: 10px 15px;
            border-radius: 8px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            font-size: 12px;
            transition: all 0.2s;
            width: 100%;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #7C3AED;
        }

        .btn-success {
            background: var(--secondary);
            color: white;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 11px;
            width: auto;
        }

        /* Share Grid */
        .share-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 15px;
        }

        .share-btn {
            padding: 8px;
            border-radius: 6px;
            color: white;
            font-size: 11px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
            cursor: pointer;
            border: none;
        }

        .facebook { background: #1877F2; }
        .twitter { background: #1DA1F2; }
        .whatsapp { background: #25D366; }
        .copy { background: var(--primary); }

        /* Loading */
        .loading {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-light);
        }

        .spinner {
            border: 3px solid rgba(0,0,0,0.1);
            border-radius: 50%;
            border-top: 3px solid var(--primary);
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 30px 20px;
            color: var(--text-light);
        }

        .empty-state i {
            font-size: 32px;
            margin-bottom: 10px;
            opacity: 0.3;
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 10px;
            right: 10px;
            left: 10px;
            padding: 12px 15px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateY(-100px);
            transition: transform 0.3s ease;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            text-align: center;
            font-size: 13px;
        }

        .notification.show {
            transform: translateY(0);
        }

        .notification.success {
            background: var(--secondary);
        }

        .notification.error {
            background: #EF4444;
        }

        /* Links */
        .links {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            gap: 10px;
        }

        .link-btn {
            flex: 1;
            padding: 10px;
            background: white;
            border: 2px solid var(--border);
            border-radius: 8px;
            text-decoration: none;
            color: var(--text);
            font-size: 12px;
            font-weight: 500;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .link-btn:hover {
            background: var(--light);
        }

        /* Responsive */
        @media (max-width: 360px) {
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .code {
                font-size: 18px;
                letter-spacing: 1px;
            }
            
            .share-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Notification -->
    <div id="notification" class="notification"></div>

    <!-- Header -->
    <div class="header">
        <div class="brand">
            <i class="fas fa-user-plus"></i>
            My Referrals
        </div>
        <div class="user-email" id="userEmail"></div>
    </div>

    <!-- Stats -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value" id="totalEarnings">$0.00</div>
            <div class="stat-label">Total Earned</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="totalReferrals">0</div>
            <div class="stat-label">Referrals</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="pendingBalance">$0.00</div>
            <div class="stat-label">Pending</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="avgEarning">$0.00</div>
            <div class="stat-label">Avg/Person</div>
        </div>
    </div>

    <!-- Tabs -->
    <div class="tabs">
        <button class="tab active" onclick="switchTab('activity')">
            <i class="fas fa-history"></i> Activity
        </button>
        <button class="tab" onclick="switchTab('referrals')">
            <i class="fas fa-users"></i> My Referrals
        </button>
        <button class="tab" onclick="switchTab('share')">
            <i class="fas fa-share-alt"></i> Share
        </button>
    </div>

    <!-- Activity Tab -->
    <div id="activityTab" class="content">
        <div class="content-title">
            <i class="fas fa-bolt"></i> Recent Commissions
        </div>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>User</th>
                        <th>Their Earn</th>
                        <th>Your 3%</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="activityTable">
                    <tr>
                        <td colspan="5" class="loading">
                            <div class="spinner"></div>
                            <p>Loading...</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Referrals Tab -->
    <div id="referralsTab" class="content" style="display: none;">
        <div class="content-title">
            <i class="fas fa-user-friends"></i> People You Referred
        </div>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Email</th>
                        <th>Joined</th>
                        <th>Earned</th>
                        <th>Your 3%</th>
                    </tr>
                </thead>
                <tbody id="referralsTable">
                    <tr>
                        <td colspan="5" class="loading">
                            <div class="spinner"></div>
                            <p>Loading...</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <!-- Share Tab -->
    <div id="shareTab" class="content" style="display: none;">
        <div class="content-title">
            <i class="fas fa-share-alt"></i> Share & Earn
        </div>
        
        <p style="font-size: 13px; color: var(--text-light); margin-bottom: 15px;">
            Share your code to earn <strong>3% of friends' earnings forever!</strong>
        </p>

        <div class="code-box">
            <div style="font-size: 12px; opacity: 0.9;">YOUR REFERRAL CODE</div>
            <div class="code" id="referralCode">LOADING...</div>
            <button class="btn btn-success btn-small" onclick="copyCode()">
                <i class="fas fa-copy"></i> Copy Code
            </button>
        </div>

        <div style="font-size: 12px; text-align: center; color: var(--text-light); margin: 10px 0;">
            They earn $100 â†’ You get $3 automatically!
        </div>

        <div class="share-grid">
            <button class="share-btn facebook" onclick="shareOnFacebook()">
                <i class="fab fa-facebook-f"></i> Facebook
            </button>
            <button class="share-btn twitter" onclick="shareOnTwitter()">
                <i class="fab fa-twitter"></i> Twitter
            </button>
            <button class="share-btn whatsapp" onclick="shareOnWhatsApp()">
                <i class="fab fa-whatsapp"></i> WhatsApp
            </button>
            <button class="share-btn copy" onclick="copyLink()">
                <i class="fas fa-link"></i> Copy Link
            </button>
        </div>

        <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid var(--border);">
            <div style="font-size: 12px; color: var(--text-light); margin-bottom: 10px;">
                <i class="fas fa-lightbulb"></i> <strong>Quick Tips:</strong>
            </div>
            <ul style="font-size: 11px; color: var(--text-light); padding-left: 20px;">
                <li>Add code to YouTube descriptions</li>
                <li>Share in creator groups</li>
                <li>Email to fellow creators</li>
                <li>Post on social media</li>
            </ul>
        </div>
    </div>

    <!-- Links -->
    <div class="links">
        <a href="https://www.evernet.evergreenempireltd.com/sign-up/" class="link-btn" target="_blank">
            <i class="fas fa-user-plus"></i> Sign Up Link
        </a>
        <a href="https://www.evernet.evergreenempireltd.com/dashboard/" class="link-btn">
            <i class="fas fa-arrow-left"></i> Back to Dashboard
        </a>
    </div>

    <!-- Firebase -->
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAuSEqhLenwrEz-qrIn1drjAugy1YSkDlI",
            authDomain: "creators-portal-428c5.firebaseapp.com",
            projectId: "creators-portal-428c5",
            storageBucket: "creators-portal-428c5.firebasestorage.app",
            messagingSenderId: "499280036303",
            appId: "1:499280036303:web:b4d80d3b7fe1291381d2ba",
            measurementId: "G-CYWGD80FS5"
        };

        let app, auth, db;
        try {
            app = firebase.initializeApp(firebaseConfig);
            auth = firebase.auth();
            db = firebase.firestore();
        } catch (error) {
            app = firebase.app();
            auth = firebase.auth();
            db = firebase.firestore();
        }
    </script>

    <!-- Main Script -->
    <script>
        // Global State
        let currentUser = null;
        let currentUserData = null;

        // Utility Functions
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function switchTab(tabName) {
            // Hide all content
            document.querySelectorAll('.content').forEach(content => {
                content.style.display = 'none';
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName + 'Tab').style.display = 'block';
            
            // Add active class to clicked tab
            event.currentTarget.classList.add('active');

            // Load data for tab
            if (tabName === 'activity') loadActivity();
            else if (tabName === 'referrals') loadReferrals();
            else if (tabName === 'share') loadShareData();
        }

        // Authentication
        async function initializeApp() {
            auth.onAuthStateChanged(async (user) => {
                if (user) {
                    currentUser = user;
                    
                    // Show user email
                    document.getElementById('userEmail').textContent = 
                        user.email.length > 20 ? user.email.substring(0, 17) + '...' : user.email;
                    
                    // Load user data
                    await loadUserData(user.uid);
                    
                } else {
                    // Redirect to login
                    window.location.href = 'https://www.evernet.evergreenempireltd.com/';
                }
            });
        }

        async function loadUserData(userId) {
            try {
                const userDoc = await db.collection('users').doc(userId).get();
                
                if (userDoc.exists) {
                    currentUserData = userDoc.data();
                    
                    // Generate referral code if missing
                    if (!currentUserData.referralCode) {
                        await generateReferralCode();
                    } else {
                        document.getElementById('referralCode').textContent = currentUserData.referralCode;
                    }
                    
                    // Load dashboard data
                    await loadDashboardData();
                    await loadActivity();
                    
                } else {
                    showNotification('User profile not found', 'error');
                }
                
            } catch (error) {
                console.error('Error loading user:', error);
                showNotification('Connection error', 'error');
            }
        }

        async function generateReferralCode() {
            try {
                const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
                let code = '';
                let isUnique = false;
                
                // Try up to 5 times
                for (let attempt = 0; attempt < 5 && !isUnique; attempt++) {
                    code = '';
                    for (let i = 0; i < 6; i++) {
                        code += chars.charAt(Math.floor(Math.random() * chars.length));
                    }
                    
                    // Check if code exists
                    const snapshot = await db.collection('users')
                        .where('referralCode', '==', code)
                        .limit(1)
                        .get();
                    
                    isUnique = snapshot.empty;
                }
                
                // Update user document
                await db.collection('users').doc(currentUser.uid).update({
                    referralCode: code,
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                currentUserData = { ...currentUserData, referralCode: code };
                document.getElementById('referralCode').textContent = code;
                
            } catch (error) {
                console.error('Error generating code:', error);
                document.getElementById('referralCode').textContent = 'ERROR';
            }
        }

        // Dashboard Functions
        async function loadDashboardData() {
            if (!currentUserData) return;
            
            // Update stats
            const totalEarnings = currentUserData.referralEarnings || 0;
            const totalReferrals = currentUserData.totalReferrals || 0;
            const pendingBalance = currentUserData.referralStats?.pendingBalance || 0;
            
            document.getElementById('totalEarnings').textContent = `$${totalEarnings.toFixed(2)}`;
            document.getElementById('totalReferrals').textContent = totalReferrals;
            document.getElementById('pendingBalance').textContent = `$${pendingBalance.toFixed(2)}`;
            
            // Calculate average
            const avgEarning = totalReferrals > 0 ? totalEarnings / totalReferrals : 0;
            document.getElementById('avgEarning').textContent = `$${avgEarning.toFixed(2)}`;
        }

        async function loadActivity() {
            try {
                const activityTable = document.getElementById('activityTable');
                
                // Get recent transactions
                const transactions = await db.collection('referralTransactions')
                    .where('referrerId', '==', currentUser.uid)
                    .orderBy('timestamp', 'desc')
                    .limit(10)
                    .get();
                
                activityTable.innerHTML = '';
                
                if (transactions.empty) {
                    activityTable.innerHTML = `
                        <tr>
                            <td colspan="5" class="empty-state">
                                <i class="fas fa-history"></i>
                                <p>No commissions yet</p>
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                transactions.forEach(doc => {
                    const txn = doc.data();
                    const date = txn.timestamp?.toDate ? txn.timestamp.toDate() : new Date();
                    
                    // Format email for mobile
                    const email = txn.referredUserEmail || 'Unknown';
                    const shortEmail = email.length > 12 ? email.substring(0, 9) + '...' : email;
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${date.toLocaleDateString('en-US', {month: 'short', day: 'numeric'})}</td>
                        <td title="${email}">${shortEmail}</td>
                        <td>$${(txn.sourceEarnings || 0).toFixed(2)}</td>
                        <td style="color: var(--secondary); font-weight: 600;">$${txn.amount.toFixed(2)}</td>
                        <td><span class="badge badge-success">${txn.status || 'Paid'}</span></td>
                    `;
                    activityTable.appendChild(row);
                });
                
            } catch (error) {
                console.error('Error loading activity:', error);
                activityTable.innerHTML = `
                    <tr>
                        <td colspan="5" class="empty-state">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Error loading</p>
                        </td>
                    </tr>
                `;
            }
        }

        async function loadReferrals() {
            try {
                const referralsTable = document.getElementById('referralsTable');
                
                // Get referred users
                const referredUsers = await db.collection('users')
                    .where('referredBy', '==', currentUser.uid)
                    .orderBy('createdAt', 'desc')
                    .get();
                
                referralsTable.innerHTML = '';
                
                if (referredUsers.empty) {
                    referralsTable.innerHTML = `
                        <tr>
                            <td colspan="5" class="empty-state">
                                <i class="fas fa-users"></i>
                                <p>No referrals yet</p>
                                <p style="font-size: 11px; margin-top: 5px;">Share your code!</p>
                            </td>
                        </tr>
                    `;
                    return;
                }
                
                let index = 1;
                referredUsers.forEach(doc => {
                    const user = doc.data();
                    const joinedDate = user.createdAt?.toDate ? user.createdAt.toDate() : new Date();
                    
                    // Format email for mobile
                    const email = user.email || 'Unknown';
                    const shortEmail = email.length > 15 ? email.substring(0, 12) + '...' : email;
                    
                    // Calculate commission
                    const userEarnings = user.totalEarned || 0;
                    const commission = userEarnings * 0.03;
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${index}</td>
                        <td title="${email}">${shortEmail}</td>
                        <td>${joinedDate.toLocaleDateString('en-US', {month: 'short', day: 'numeric'})}</td>
                        <td>$${userEarnings.toFixed(2)}</td>
                        <td style="color: var(--secondary); font-weight: 600;">$${commission.toFixed(2)}</td>
                    `;
                    referralsTable.appendChild(row);
                    index++;
                });
                
            } catch (error) {
                console.error('Error loading referrals:', error);
                referralsTable.innerHTML = `
                    <tr>
                        <td colspan="5" class="empty-state">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Error loading</p>
                        </td>
                    </tr>
                `;
            }
        }

        function loadShareData() {
            // Nothing needed here, code is already loaded
        }

        // Share Functions
        function copyCode() {
            const code = document.getElementById('referralCode').textContent;
            if (code === 'LOADING...' || code === 'ERROR') {
                showNotification('Code not ready', 'error');
                return;
            }
            
            navigator.clipboard.writeText(code).then(() => {
                showNotification('Code copied!', 'success');
            }).catch(err => {
                showNotification('Failed to copy', 'error');
            });
        }

        function copyLink() {
            if (!currentUserData?.referralCode) {
                showNotification('Code not ready', 'error');
                return;
            }
            
            const link = `https://www.evernet.evergreenempireltd.com/sign-up/?ref=${currentUserData.referralCode}`;
            navigator.clipboard.writeText(link).then(() => {
                showNotification('Link copied!', 'success');
            }).catch(err => {
                showNotification('Failed to copy', 'error');
            });
        }

        function shareOnFacebook() {
            if (!currentUserData?.referralCode) {
                showNotification('Code not ready', 'error');
                return;
            }
            
            const text = `Join EverNet using my code ${currentUserData.referralCode} and earn from YouTube Shorts!`;
            const url = `https://www.evernet.evergreenempireltd.com/sign-up/?ref=${currentUserData.referralCode}`;
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(text)}`, '_blank', 'width=600,height=400');
        }

        function shareOnTwitter() {
            if (!currentUserData?.referralCode) {
                showNotification('Code not ready', 'error');
                return;
            }
            
            const text = `Earn from YouTube Shorts! Use code ${currentUserData.referralCode} on EverNet`;
            const url = `https://www.evernet.evergreenempireltd.com/sign-up/?ref=${currentUserData.referralCode}`;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank', 'width=600,height=400');
        }

        function shareOnWhatsApp() {
            if (!currentUserData?.referralCode) {
                showNotification('Code not ready', 'error');
                return;
            }
            
            const text = `Join EverNet using code ${currentUserData.referralCode} - Let's earn from YouTube Shorts together! ${window.location.origin}/sign-up/?ref=${currentUserData.referralCode}`;
            window.open(`https://wa.me/?text=${encodeURIComponent(text)}`, '_blank', 'width=600,height=400');
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });
    </script>
</body>

</html> 
